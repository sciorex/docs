import{_ as e,c as a,o as i,ag as n}from"./chunks/framework.CQuhCYrb.js";const t="/images/cookbook/code-review-agent.svg",g=JSON.parse('{"title":"Code Review Agent","description":"","frontmatter":{},"headers":[],"relativePath":"cookbook/code-review-agent.md","filePath":"cookbook/code-review-agent.md"}'),l={name:"cookbook/code-review-agent.md"};function p(o,s,r,h,c,d){return i(),a("div",null,[...s[0]||(s[0]=[n('<h1 id="code-review-agent" tabindex="-1">Code Review Agent <a class="header-anchor" href="#code-review-agent" aria-label="Permalink to &quot;Code Review Agent&quot;">‚Äã</a></h1><p>Create an AI agent that reviews code changes and provides actionable feedback.</p><p><strong>Difficulty</strong>: Beginner <strong>Time</strong>: 10 minutes</p><h2 id="what-you-ll-build" tabindex="-1">What You&#39;ll Build <a class="header-anchor" href="#what-you-ll-build" aria-label="Permalink to &quot;What You&#39;ll Build&quot;">‚Äã</a></h2><p>An agent that:</p><ul><li>Analyzes code diffs</li><li>Identifies potential bugs and security issues</li><li>Suggests improvements and best practices</li><li>Provides inline comments</li></ul><p><img src="'+t+`" alt="Code Review Agent"><em>TBD: Replace with screenshot of code review agent in action</em></p><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">‚Äã</a></h2><ul><li>Sciorex installed and configured</li><li>A workspace with code to review</li></ul><h2 id="step-1-create-the-agent" tabindex="-1">Step 1: Create the Agent <a class="header-anchor" href="#step-1-create-the-agent" aria-label="Permalink to &quot;Step 1: Create the Agent&quot;">‚Äã</a></h2><ol><li>Navigate to <strong>Agents</strong> in the sidebar</li><li>Click <strong>+ New Agent</strong></li><li>Enter the following configuration:</li></ol><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Code Reviewer</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Reviews code for bugs, security issues, and best practices</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">systemPrompt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  You are an expert code reviewer. When reviewing code:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  1. Look for bugs, logic errors, and edge cases</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  2. Check for security vulnerabilities (injection, XSS, etc.)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  3. Identify performance issues</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  4. Suggest improvements for readability and maintainability</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  5. Note any missing error handling</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  6. Check for proper typing (if applicable)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  Be constructive and specific. Explain WHY something is an issue</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  and HOW to fix it. Use code examples when helpful.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  Format your review with clear sections:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  - üêõ Bugs</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  - üîí Security</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  - ‚ö° Performance</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  - üí° Suggestions</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">claude-sonnet-4-5-20250929</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">thinkingLevel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">think</span></span></code></pre></div><ol start="4"><li>Click <strong>Save</strong></li></ol><h2 id="step-2-configure-permissions" tabindex="-1">Step 2: Configure Permissions <a class="header-anchor" href="#step-2-configure-permissions" aria-label="Permalink to &quot;Step 2: Configure Permissions&quot;">‚Äã</a></h2><p>For code review, the agent needs read access but shouldn&#39;t modify files:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">allowedTools</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Read</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Glob</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Grep</span></span></code></pre></div><p>This ensures the agent can:</p><ul><li>Read files to understand context</li><li>Search for related code</li><li>But NOT make any changes</li></ul><h2 id="step-3-use-the-agent" tabindex="-1">Step 3: Use the Agent <a class="header-anchor" href="#step-3-use-the-agent" aria-label="Permalink to &quot;Step 3: Use the Agent&quot;">‚Äã</a></h2><h3 id="option-a-chat-interface" tabindex="-1">Option A: Chat Interface <a class="header-anchor" href="#option-a-chat-interface" aria-label="Permalink to &quot;Option A: Chat Interface&quot;">‚Äã</a></h3><ol><li>Go to <strong>Chat</strong></li><li>Select your <strong>Code Reviewer</strong> agent from the dropdown</li><li>Paste a code snippet or ask it to review a file:</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Please review the changes in src/auth/login.ts</span></span></code></pre></div><h3 id="option-b-link-to-a-ticket" tabindex="-1">Option B: Link to a Ticket <a class="header-anchor" href="#option-b-link-to-a-ticket" aria-label="Permalink to &quot;Option B: Link to a Ticket&quot;">‚Äã</a></h3><ol><li>Create a ticket for the code review task</li><li>Start a chat session linked to that ticket</li><li>The agent&#39;s review becomes part of the ticket history</li></ol><h2 id="example-output" tabindex="-1">Example Output <a class="header-anchor" href="#example-output" aria-label="Permalink to &quot;Example Output&quot;">‚Äã</a></h2><p>Here&#39;s what a review might look like:</p><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">## Code Review: src/auth/login.ts</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">### üêõ Bugs</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold;">**Line 45**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Password comparison uses </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\`==\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> instead of </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\`===\`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\`\`\`typescript</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// Current</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">if (password == storedHash)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// Fixed</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">if (password === storedHash)</span></span></code></pre></div><h3 id="üîí-security" tabindex="-1">üîí Security <a class="header-anchor" href="#üîí-security" aria-label="Permalink to &quot;üîí Security&quot;">‚Äã</a></h3><p><strong>Line 23</strong>: User input not sanitized before SQL query</p><ul><li>Risk: SQL injection vulnerability</li><li>Fix: Use parameterized queries</li></ul><h3 id="‚ö°-performance" tabindex="-1">‚ö° Performance <a class="header-anchor" href="#‚ö°-performance" aria-label="Permalink to &quot;‚ö° Performance&quot;">‚Äã</a></h3><p><strong>Line 67-80</strong>: Multiple database calls in a loop</p><ul><li>Consider batching these queries</li></ul><h3 id="üí°-suggestions" tabindex="-1">üí° Suggestions <a class="header-anchor" href="#üí°-suggestions" aria-label="Permalink to &quot;üí° Suggestions&quot;">‚Äã</a></h3><ul><li>Add rate limiting to prevent brute force attacks</li><li>Consider adding 2FA support</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span></span></span>
<span class="line"><span>## Advanced: Review Git Diffs</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Create a variant that specifically reviews git changes:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\`\`\`yaml</span></span>
<span class="line"><span>systemPrompt: |</span></span>
<span class="line"><span>  You are a code reviewer focusing on git diffs.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  First, run: git diff HEAD~1</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  Then analyze only the changed lines, considering:</span></span>
<span class="line"><span>  - What the change is trying to accomplish</span></span>
<span class="line"><span>  - Whether the implementation is correct</span></span>
<span class="line"><span>  - Any risks introduced by the change</span></span></code></pre></div><h2 id="tips" tabindex="-1">Tips <a class="header-anchor" href="#tips" aria-label="Permalink to &quot;Tips&quot;">‚Äã</a></h2><ul><li><strong>Be specific</strong>: Ask the agent to focus on particular aspects (security, performance, etc.)</li><li><strong>Provide context</strong>: Tell the agent what the code is supposed to do</li><li><strong>Use thinking mode</strong>: Enable extended thinking for complex reviews</li><li><strong>Iterate</strong>: Ask follow-up questions about specific issues</li></ul><h2 id="related" tabindex="-1">Related <a class="header-anchor" href="#related" aria-label="Permalink to &quot;Related&quot;">‚Äã</a></h2><ul><li><a href="/cookbook/first-agent.html">Your First Agent</a> - Start here if new to agents</li><li><a href="/features/agents.html">Agents Reference</a> - Full configuration options</li><li><a href="/reference/models.html">Models Reference</a> - Choose the right Claude model</li><li><a href="/features/agents.html#tool-permissions">Tool Permissions</a> - Control what agents can do</li><li><a href="/reference/models.html#extended-thinking">Extended Thinking</a> - Enable deeper reasoning</li></ul>`,40)])])}const u=e(l,[["render",p]]);export{g as __pageData,u as default};
