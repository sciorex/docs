import{_ as a,c as i,o as e,ag as n}from"./chunks/framework.CQuhCYrb.js";const l="/images/cookbook/parallel-flow.svg",g=JSON.parse('{"title":"Parallel Execution","description":"","frontmatter":{},"headers":[],"relativePath":"cookbook/parallel-flow.md","filePath":"cookbook/parallel-flow.md"}'),t={name:"cookbook/parallel-flow.md"};function p(h,s,r,o,k,d){return e(),i("div",null,[...s[0]||(s[0]=[n('<h1 id="parallel-execution" tabindex="-1">Parallel Execution <a class="header-anchor" href="#parallel-execution" aria-label="Permalink to &quot;Parallel Execution&quot;">​</a></h1><p>Run multiple agents simultaneously for faster results.</p><p><strong>Difficulty</strong>: Intermediate <strong>Time</strong>: 15 minutes</p><h2 id="what-you-ll-build" tabindex="-1">What You&#39;ll Build <a class="header-anchor" href="#what-you-ll-build" aria-label="Permalink to &quot;What You&#39;ll Build&quot;">​</a></h2><p>A flow that:</p><ul><li>Runs multiple agents in parallel</li><li>Merges results from all branches</li><li>Optimizes execution time</li></ul><p><img src="'+l+`" alt="Parallel Flow"><em>TBD: Replace with screenshot of parallel flow</em></p><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">​</a></h2><ul><li>Completed <a href="/cookbook/simple-flow.html">Simple Sequential Flow</a></li><li>Understanding of flow basics</li></ul><h2 id="why-parallel-execution" tabindex="-1">Why Parallel Execution? <a class="header-anchor" href="#why-parallel-execution" aria-label="Permalink to &quot;Why Parallel Execution?&quot;">​</a></h2><p><strong>Sequential (slow):</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>A → B → C → D</span></span>
<span class="line"><span>Time: 4 units</span></span></code></pre></div><p><strong>Parallel (fast):</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>    ┌─ B ─┐</span></span>
<span class="line"><span>A → ┼─ C ─┼ → D</span></span>
<span class="line"><span>    └─ D ─┘</span></span>
<span class="line"><span>Time: 2 units</span></span></code></pre></div><p>When tasks are independent, run them simultaneously.</p><h2 id="step-1-identify-independent-tasks" tabindex="-1">Step 1: Identify Independent Tasks <a class="header-anchor" href="#step-1-identify-independent-tasks" aria-label="Permalink to &quot;Step 1: Identify Independent Tasks&quot;">​</a></h2><p>Tasks can run in parallel if they:</p><ul><li>Don&#39;t depend on each other&#39;s output</li><li>Can execute simultaneously</li><li>Don&#39;t have shared state conflicts</li></ul><p><strong>Good for parallel:</strong></p><ul><li>Multiple code reviews (security, style, performance)</li><li>Searching multiple sources</li><li>Generating multiple variations</li></ul><p><strong>Not good for parallel:</strong></p><ul><li>Sequential transformations</li><li>Tasks that need previous output</li><li>Order-dependent operations</li></ul><h2 id="step-2-create-a-parallel-flow" tabindex="-1">Step 2: Create a Parallel Flow <a class="header-anchor" href="#step-2-create-a-parallel-flow" aria-label="Permalink to &quot;Step 2: Create a Parallel Flow&quot;">​</a></h2><h3 id="example-multi-aspect-code-review" tabindex="-1">Example: Multi-Aspect Code Review <a class="header-anchor" href="#example-multi-aspect-code-review" aria-label="Permalink to &quot;Example: Multi-Aspect Code Review&quot;">​</a></h3><ol><li>Go to <strong>Flows</strong> → <strong>+ New Flow</strong></li><li>Name it &quot;Comprehensive Code Review&quot;</li></ol><h3 id="flow-structure" tabindex="-1">Flow Structure <a class="header-anchor" href="#flow-structure" aria-label="Permalink to &quot;Flow Structure&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>              ┌── Security Review ──┐</span></span>
<span class="line"><span>              │                     │</span></span>
<span class="line"><span>Trigger ──────┼── Performance Review┼── Merge ── Summary</span></span>
<span class="line"><span>              │                     │</span></span>
<span class="line"><span>              └── Style Review ─────┘</span></span></code></pre></div><h3 id="agent-definitions" tabindex="-1">Agent Definitions <a class="header-anchor" href="#agent-definitions" aria-label="Permalink to &quot;Agent Definitions&quot;">​</a></h3><p><strong>Security Reviewer:</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Security Reviewer</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">claude-sonnet-4-5-20250929</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">thinkingLevel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">think</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">systemPrompt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  Focus exclusively on security issues:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  - Injection vulnerabilities</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  - Authentication flaws</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  - Data exposure risks</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  - Insecure dependencies</span></span></code></pre></div><p><strong>Performance Reviewer:</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Performance Reviewer</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">claude-sonnet-4-5-20250929</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">thinkingLevel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">think</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">systemPrompt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  Focus exclusively on performance:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  - Algorithm efficiency</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  - Memory usage</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  - Database queries</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  - Caching opportunities</span></span></code></pre></div><p><strong>Style Reviewer:</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Style Reviewer</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">claude-haiku-4-5-20251001</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">systemPrompt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  Focus exclusively on code style:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  - Naming conventions</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  - Code organization</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  - Documentation</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  - Best practices</span></span></code></pre></div><h2 id="step-3-configure-the-flow" tabindex="-1">Step 3: Configure the Flow <a class="header-anchor" href="#step-3-configure-the-flow" aria-label="Permalink to &quot;Step 3: Configure the Flow&quot;">​</a></h2><h3 id="trigger-node" tabindex="-1">Trigger Node <a class="header-anchor" href="#trigger-node" aria-label="Permalink to &quot;Trigger Node&quot;">​</a></h3><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">triggerType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">manual</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">inputSchema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">object</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    code</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">string</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Code to review</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">string</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Additional context</span></span></code></pre></div><h3 id="parallel-branches" tabindex="-1">Parallel Branches <a class="header-anchor" href="#parallel-branches" aria-label="Permalink to &quot;Parallel Branches&quot;">​</a></h3><p>From the trigger, create three connections to three agent nodes.</p><p><strong>Each agent input:</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  Review this code:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  {{trigger.input.code}}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  Context: {{trigger.input.context}}</span></span></code></pre></div><h3 id="merge-node" tabindex="-1">Merge Node <a class="header-anchor" href="#merge-node" aria-label="Permalink to &quot;Merge Node&quot;">​</a></h3><p>Add a <strong>Merge</strong> node that waits for all branches:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">waitFor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">all</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Wait for all branches</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">timeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60000</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 60 second timeout</span></span></code></pre></div><h3 id="summary-agent" tabindex="-1">Summary Agent <a class="header-anchor" href="#summary-agent" aria-label="Permalink to &quot;Summary Agent&quot;">​</a></h3><p>After the merge, add a final agent:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Review Summarizer</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">claude-sonnet-4-5-20250929</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  Compile these reviews into a single report:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  ## Security Review</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  {{nodes.securityReview.output}}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  ## Performance Review</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  {{nodes.performanceReview.output}}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  ## Style Review</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  {{nodes.styleReview.output}}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  Prioritize issues by severity.</span></span></code></pre></div><h2 id="merge-strategies" tabindex="-1">Merge Strategies <a class="header-anchor" href="#merge-strategies" aria-label="Permalink to &quot;Merge Strategies&quot;">​</a></h2><h3 id="wait-for-all" tabindex="-1">Wait for All <a class="header-anchor" href="#wait-for-all" aria-label="Permalink to &quot;Wait for All&quot;">​</a></h3><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">waitFor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">all</span></span></code></pre></div><p>Continues only when ALL branches complete.</p><h3 id="wait-for-any" tabindex="-1">Wait for Any <a class="header-anchor" href="#wait-for-any" aria-label="Permalink to &quot;Wait for Any&quot;">​</a></h3><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">waitFor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">any</span></span></code></pre></div><p>Continues when ANY branch completes (race condition).</p><h3 id="wait-for-n" tabindex="-1">Wait for N <a class="header-anchor" href="#wait-for-n" aria-label="Permalink to &quot;Wait for N&quot;">​</a></h3><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">waitFor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Wait for 2 branches</span></span></code></pre></div><p>Continues when N branches complete.</p><h2 id="accessing-parallel-results" tabindex="-1">Accessing Parallel Results <a class="header-anchor" href="#accessing-parallel-results" aria-label="Permalink to &quot;Accessing Parallel Results&quot;">​</a></h2><p>After merge, access each branch&#39;s output:</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Individual outputs</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nodes.securityReview.output</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nodes.performanceReview.output</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nodes.styleReview.output</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// All outputs as array</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">merge.outputs  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [{nodeId, output}, ...]</span></span></code></pre></div><h2 id="example-research-from-multiple-sources" tabindex="-1">Example: Research from Multiple Sources <a class="header-anchor" href="#example-research-from-multiple-sources" aria-label="Permalink to &quot;Example: Research from Multiple Sources&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>              ┌── Academic Search ──┐</span></span>
<span class="line"><span>              │                     │</span></span>
<span class="line"><span>Query ────────┼── News Search ──────┼── Merge ── Synthesize</span></span>
<span class="line"><span>              │                     │</span></span>
<span class="line"><span>              └── Technical Blogs ──┘</span></span></code></pre></div><p><strong>Academic Search Agent:</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Academic Searcher</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">allowedTools</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">WebSearch</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">systemPrompt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  Search for academic papers and research.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  Focus on peer-reviewed sources.</span></span></code></pre></div><p><strong>News Search Agent:</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">News Searcher</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">allowedTools</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">WebSearch</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">systemPrompt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  Search for recent news articles.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  Focus on reputable publications.</span></span></code></pre></div><p><strong>Blog Search Agent:</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Blog Searcher</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">allowedTools</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">WebSearch</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">systemPrompt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  Search technical blogs and forums.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  Focus on practical experiences.</span></span></code></pre></div><h2 id="error-handling-in-parallel" tabindex="-1">Error Handling in Parallel <a class="header-anchor" href="#error-handling-in-parallel" aria-label="Permalink to &quot;Error Handling in Parallel&quot;">​</a></h2><h3 id="individual-branch-errors" tabindex="-1">Individual Branch Errors <a class="header-anchor" href="#individual-branch-errors" aria-label="Permalink to &quot;Individual Branch Errors&quot;">​</a></h3><p>Handle errors per branch:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># After merge</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">condition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">nodes.securityReview.error !== null</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  → [true] → Handle security review failure</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  → [false] → Continue normally</span></span></code></pre></div><h3 id="partial-results" tabindex="-1">Partial Results <a class="header-anchor" href="#partial-results" aria-label="Permalink to &quot;Partial Results&quot;">​</a></h3><p>Continue with available results:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">waitFor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">all</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">continueOnError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Don&#39;t fail if one branch errors</span></span></code></pre></div><p>Then filter out errors:</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> validResults</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> merge.outputs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">o</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">o.error);</span></span></code></pre></div><h2 id="performance-optimization" tabindex="-1">Performance Optimization <a class="header-anchor" href="#performance-optimization" aria-label="Permalink to &quot;Performance Optimization&quot;">​</a></h2><h3 id="right-size-models" tabindex="-1">Right-Size Models <a class="header-anchor" href="#right-size-models" aria-label="Permalink to &quot;Right-Size Models&quot;">​</a></h3><p>Use appropriate models per task:</p><table tabindex="0"><thead><tr><th>Task Complexity</th><th>Model</th></tr></thead><tbody><tr><td>Simple classification</td><td>Haiku</td></tr><tr><td>Standard analysis</td><td>Sonnet</td></tr><tr><td>Complex reasoning</td><td>Opus</td></tr></tbody></table><h3 id="limit-parallelism" tabindex="-1">Limit Parallelism <a class="header-anchor" href="#limit-parallelism" aria-label="Permalink to &quot;Limit Parallelism&quot;">​</a></h3><p>Don&#39;t parallelize everything:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maxConcurrent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Limit simultaneous executions</span></span></code></pre></div><h3 id="timeout-management" tabindex="-1">Timeout Management <a class="header-anchor" href="#timeout-management" aria-label="Permalink to &quot;Timeout Management&quot;">​</a></h3><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">branchTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30000</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 30s per branch</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">totalTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">120000</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 2min total</span></span></code></pre></div><h2 id="complex-parallel-patterns" tabindex="-1">Complex Parallel Patterns <a class="header-anchor" href="#complex-parallel-patterns" aria-label="Permalink to &quot;Complex Parallel Patterns&quot;">​</a></h2><h3 id="fan-out-fan-in" tabindex="-1">Fan-Out / Fan-In <a class="header-anchor" href="#fan-out-fan-in" aria-label="Permalink to &quot;Fan-Out / Fan-In&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>       ┌── Process 1 ──┐</span></span>
<span class="line"><span>       │               │</span></span>
<span class="line"><span>Split ─┼── Process 2 ──┼── Merge</span></span>
<span class="line"><span>       │               │</span></span>
<span class="line"><span>       └── Process 3 ──┘</span></span></code></pre></div><h3 id="parallel-with-conditions" tabindex="-1">Parallel with Conditions <a class="header-anchor" href="#parallel-with-conditions" aria-label="Permalink to &quot;Parallel with Conditions&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>       ┌── [fast path] ── Quick Analysis ──┐</span></span>
<span class="line"><span>Input ─┤                                    ├── Merge</span></span>
<span class="line"><span>       └── [deep path] ── Deep Analysis ───┘</span></span></code></pre></div><h3 id="nested-parallel" tabindex="-1">Nested Parallel <a class="header-anchor" href="#nested-parallel" aria-label="Permalink to &quot;Nested Parallel&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>       ┌── Branch A ──┬── A1 ──┬── Merge A ──┐</span></span>
<span class="line"><span>       │              └── A2 ──┘              │</span></span>
<span class="line"><span>Main ──┤                                      ├── Final Merge</span></span>
<span class="line"><span>       │              ┌── B1 ──┐              │</span></span>
<span class="line"><span>       └── Branch B ──┴── B2 ──┴── Merge B ──┘</span></span></code></pre></div><h2 id="tips" tabindex="-1">Tips <a class="header-anchor" href="#tips" aria-label="Permalink to &quot;Tips&quot;">​</a></h2><ul><li><strong>Identify independence</strong>: Only parallelize truly independent tasks</li><li><strong>Balance load</strong>: Don&#39;t create too many parallel branches</li><li><strong>Handle failures</strong>: Plan for partial failures</li><li><strong>Monitor timing</strong>: Track which branches are slow</li><li><strong>Test thoroughly</strong>: Parallel flows can have subtle timing issues</li></ul><h2 id="related" tabindex="-1">Related <a class="header-anchor" href="#related" aria-label="Permalink to &quot;Related&quot;">​</a></h2><ul><li><a href="/cookbook/simple-flow.html">Simple Sequential Flow</a></li><li><a href="/cookbook/conditional-flow.html">Conditional Branching</a></li><li><a href="/cookbook/chaining-agents.html">Chaining Multiple Agents</a></li><li><a href="/features/flows/overview.html">Flows Overview</a></li></ul>`,97)])])}const u=a(t,[["render",p]]);export{g as __pageData,u as default};
